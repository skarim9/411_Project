var apiGateway=apiGateway||{};apiGateway.core=apiGateway.core||{},apiGateway.core.sigV4ClientFactory={},apiGateway.core.sigV4ClientFactory.newClient=function(e){function t(e){return CryptoJS.SHA256(e)}function n(e){return e.toString(CryptoJS.enc.Hex)}function r(e,t){return CryptoJS.HmacSHA256(t,e,{asBytes:!0})}function a(e,r,a,o,c){return e+"\n"+i(r)+"\n"+s(a)+"\n"+u(o)+"\n"+y(o)+"\n"+n(t(c))}function o(e){return n(t(e))}function i(e){return encodeURI(e)}function s(e){if(Object.keys(e).length<1)return"";var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);t.sort();for(var r="",a=0;a<t.length;a++)r+=t[a]+"="+c(e[t[a]])+"&";return r.substr(0,r.length-1)}function c(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}function u(e){var t="",n=[];for(var r in e)e.hasOwnProperty(r)&&n.push(r);n.sort();for(var a=0;a<n.length;a++)t+=n[a].toLowerCase()+":"+e[n[a]]+"\n";return t}function y(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n.toLowerCase());return t.sort(),t.join(";")}function p(e,t,n){return w+"\n"+e+"\n"+t+"\n"+n}function d(e,t,n){return e.substr(0,8)+"/"+t+"/"+n+"/"+h}function f(e,t,n,a){return r(r(r(r(g+e,t.substr(0,8)),n),a),h)}function v(e,t){return n(r(e,t))}function l(e,t,n,r){return w+" Credential="+e+"/"+t+", SignedHeaders="+y(n)+", Signature="+r}var w="AWS4-HMAC-SHA256",h="aws4_request",g="AWS4",C="x-amz-date",G="x-amz-security-token",m="host",S="Authorization",T={};return void 0===e.accessKey||void 0===e.secretKey?T:(T.accessKey=apiGateway.core.utils.assertDefined(e.accessKey,"accessKey"),T.secretKey=apiGateway.core.utils.assertDefined(e.secretKey,"secretKey"),T.sessionToken=e.sessionToken,T.serviceName=apiGateway.core.utils.assertDefined(e.serviceName,"serviceName"),T.region=apiGateway.core.utils.assertDefined(e.region,"region"),T.endpoint=apiGateway.core.utils.assertDefined(e.endpoint,"endpoint"),T.makeRequest=function(t){var n=apiGateway.core.utils.assertDefined(t.verb,"verb"),r=apiGateway.core.utils.assertDefined(t.path,"path"),i=apiGateway.core.utils.copy(t.queryParams);void 0===i&&(i={});var c=apiGateway.core.utils.copy(t.headers);void 0===c&&(c={}),void 0===c["Content-Type"]&&(c["Content-Type"]=e.defaultContentType),void 0===c.Accept&&(c.Accept=e.defaultAcceptType);var u=apiGateway.core.utils.copy(t.body);u=void 0===u||"GET"===n?"":JSON.stringify(u),(""===u||void 0===u||null===u)&&delete c["Content-Type"];var y=(new Date).toISOString().replace(/\.\d{3}Z$/,"Z").replace(/[:\-]|\.\d{3}/g,"");c[C]=y;var w=document.createElement("a");w.href=T.endpoint,c[m]=w.hostname;var h=a(n,r,i,c,u),g=o(h),A=d(y,T.region,T.serviceName),K=p(y,A,g),k=f(T.secretKey,y,T.region,T.serviceName),D=v(k,K);c[S]=l(T.accessKey,A,c,D),void 0!==T.sessionToken&&""!==T.sessionToken&&(c[G]=T.sessionToken),delete c[m];var b=e.endpoint+r,H=s(i);""!=H&&(b+="?"+H),void 0===c["Content-Type"]&&(c["Content-Type"]=e.defaultContentType);var N={method:n,url:b,headers:c,data:u};return axios(N)},T)};